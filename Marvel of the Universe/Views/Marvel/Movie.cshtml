@model Marvel_of_the_Universe.Models.Movie
@{
    ViewBag.Title = Model.Name;
}
<div class="container-fluid padding">
    <div class="row">
        <div class=" col-md-4">
            <img height="375" width="280" src="~/Images/Movies/@Model.Image" class="img-thumbnail" />
        </div>
        <div class="border-white card text-black-50 text-body col-md-8" style="padding:10px;">
            <p><h2 class="text-center text-danger">@Model.Name</h2></p>
            <p><h5>Genre: @Model.Genre</h5></p>
            <p><h5>Year release: @Model.YearRelease</h5></p>
            <div id="like" class="row mx-auto">
                <h4 style="padding:5px">@Model.Likes.Where(c => c.like == true).Count()</h4>
                @using (Ajax.BeginForm("LikeMovie", "Marvel", new AjaxOptions { UpdateTargetId = "like", HttpMethod = "POST" }))
                {
                    @Html.Hidden("MovieId", Model.Id)
                    <button type="submit">
                        <img src="~/Images/Like/Like.png" width="35" height="35" />
                    </button>
                }
                <h4 style="padding:5px">@Model.Likes.Where(c => c.like == false).Count()</h4>
                @using (Ajax.BeginForm("DislikeMovie", "Marvel", new AjaxOptions { UpdateTargetId = "like", HttpMethod = "POST" }))
                {
                    @Html.Hidden("MovieId", Model.Id)
                    <button type="submit">
                        <img src="~/Images/Like/Dislike.png" width="35" height="35" />
                    </button>
                }
            </div>
        </div>
    </div>
    <div id="carouselControls" class="carousel slide" data-ride="carousel">
        <ol class="carousel-indicators">
            <li class="active" data-target="#carousel" data-slide="0"></li>
            @for (int i = 1; i < Model.Heroes.Count; i++)
            {
                <li data-target="#carousel" data-slide="@i"></li>
            }
        </ol>

        <div class="carousel-inner">
            @{
                bool first = true;
                foreach (var heroe in Model.Heroes)
                {
                    if (first)
                    {
                        <div class="carousel-item active">
                            <img class="d-block w-100 figure-img" src="~/Images/Heroes/@heroe.Image" height="650" />
                            <div class="carousel-caption d-none d-md-block">
                                <h3>@heroe.Name</h3>
                            </div>
                        </div>
                    }
                    else
                    {
                        <div class="carousel-item">
                            <img class="d-block w-100 figure-img" src="~/Images/Heroes/@heroe.Image" height="650" />
                            <div class="carousel-caption d-none d-md-block">
                                <h3>@heroe.Name</h3>
                            </div>
                        </div>
                    }
                    first = false;
                }
            }
        </div>
        <a class="carousel-control-prev" href="#carouselControls" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#carouselControls" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
        </a>
    </div>
    <div id="comments" class="row">
        @{
            foreach (var comment in Model.Comments)
            {
                <div class="col-md-12 text-white bg-danger" style="margin:5px">
                    <h3 class="text-left">@comment.UserName</h3>
                    <p><h5>@comment.Text</h5></p>
                </div>
            }
        }
    </div>
    @using (Ajax.BeginForm("NewComment", "Marvel", new AjaxOptions { UpdateTargetId = "comments", HttpMethod = "POST", InsertionMode = InsertionMode.InsertAfter }))
    {
        @Html.Hidden("Id", Model.Comments.Count + 1)
        @Html.TextArea("Text", "Comment", 5, 200, null)
        @Html.Hidden("UserName", User.Identity.Name)
        @Html.Hidden("HeroeId", Model.Id)
        @Html.Hidden("MovieId", null)
        <input type="submit" value="Send" class="text-danger">
    }
</div>
